MSP430F149读写SD卡以及简单的文件系统

硬件：www.just430.com朱明老师提供的Easy430开发板以及SD卡模块
底层驱动使用TI提供的MMC驱动程序，简单文件系统使用微控设计网www.Microcontrol.cn debug版主提供的文件系统，可以实现简单的文件读写。

已经调试成功。

该系统中存在几个问题：
1.文件名只支持大写字母和数字，否则在PC上打不开。
2.创建文件只能事先指定大小，这样问题就出现了，如果指定小了，你的数据就不能完全显示，如果指定大了，就会把数据区的乱码显示出来。



接上回^_^

1.修改了获得和文件名对应目录函数GetFileID()的返回值，原来返回1表示找到，现在使其返回Index即文件目录在根目录中的项数(第几项)，可以根据这个值找到文件目录地址，方便删除目录

2.增加了删除文件函数DelFile()

3.修改了创建一个空文件函数CreateFile(),取消了指定Size,让其名副其实的是一个空文件，Size指定为0。

4.修改了操作文件数据函数OperateFile(),对已经存在的文件进行操作，每次只能操作512个字节即一个扇区，操作完扇区之后更新根目录中的文件大小FileDir.FilePosit.Size,操作完一个簇之后更新FAT表，这样可以实现创建想要大小的文件，不会引进多于的字节。

5.增加了写备份文件分配表函数WriteFAT2(),由于每次操作完成之后都备份一次会花大量的时间，因此写FAT1的时候，同时也写FAT2。


关于目录、长文件名等。。继续改进中。。。。。